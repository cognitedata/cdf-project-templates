externalId: tutorial-load-asset2children
name: tutorial-load-Asset2children
query: >-
  /* MAPPING_MODE_ENABLED: true */
  /* {"version":1,"sourceType":"raw","mappings":[
  {"from":"externalId","to":"externalId","asType":"STRING"},
  {"from":"sourceExternalId","to":"startNode","asType":"STRUCT<`space`:STRING, `externalId`:STRING>"},
  {"from":"targetExternalId","to":"endNode","asType":"STRUCT<`space`:STRING, `externalId`:STRING>"}],
  "sourceLevel1":"tutorial_apm","sourceLevel2":"asset2children"} */
  select
    cast(`externalId` as STRING) as externalId,
    node_reference('tutorial_apm_simple', `sourceExternalId`) as startNode,
    node_reference('tutorial_apm_simple', `targetExternalId`) as endNode
  from
    `tutorial_apm`.`asset2children`;
destination:
  dataModel:
    space: tutorial_apm_simple
    externalId: tutorial_apm_simple
    version: "1"
    destinationType: Asset
    destinationRelationshipFromType: children
  instanceSpace: tutorial_apm_simple
  type: instances
ignoreNullFields: true
shared: true
action: upsert
# Specify credentials separately like this:
# You can also use different credentials for the running transformations than the ones you use to deploy
authentication:
  clientId: fIOVnO3Yo1gqTyamZLReiH4O6L8hXdxt
  clientSecret: fIOVnO3Yo1gqTyamZLReiH4O6L8hXdxt
  tokenUrl: https://cognite-trials.eu.auth0.com/oauth/token
  # Optional: If idP requires providing the scopes
  cdfProjectName: trial-572dca111144a5196a6b1
  scopes:
    - ['https://westeurope-1.cognitedata.com/.default']
  # Optional: If idP requires providing the audience
  audience: https://westeurope-1.cognitedata.com
