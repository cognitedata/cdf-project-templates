Group:
- capabilities:
  - rawAcl:
      actions:
      - READ
      - WRITE
      scope:
        tableScope:
          dbsToTables:
            src-asset-valhall-workmate:
              tables: []
  - extractionConfigsAcl:
      actions:
      - READ
      scope:
        extractionPipelineScope:
          ids:
          - 1
  metadata:
    module_version: '1'
    origin: cdf-project-templates
  name: asset:valhall:extractor
  sourceId: c74797ce-c49b-4ada-9186-8fe21c54c3de
- capabilities:
  - transformationsAcl:
      actions:
      - READ
      - WRITE
      scope:
        all: {}
  - sessionsAcl:
      actions:
      - LIST
      - CREATE
      - DELETE
      scope:
        all: {}
  metadata:
    module_version: '1'
    origin: cdf-project-templates
  name: asset:valhall:processing
  sourceId: c74797ce-c49b-4ada-9186-8fe21c54c3de
- capabilities:
  - rawAcl:
      actions:
      - READ
      - WRITE
      scope:
        tableScope:
          dbsToTables:
            src-asset-valhall-workmate:
              tables: []
  - assetsAcl:
      actions:
      - READ
      - WRITE
      scope:
        datasetScope:
          ids:
          - 42
  metadata:
    module_version: '1'
    origin: cdf-project-templates
  name: asset:valhall:processing
  sourceId: c74797ce-c49b-4ada-9186-8fe21c54c3de
- capabilities:
  - assetsAcl:
      actions:
      - READ
      scope:
        datasetScope:
          ids:
          - 42
  metadata:
    module_version: '1'
    origin: cdf-project-templates
  name: asset:valhall:read
  sourceId: c74797ce-c49b-4ada-9186-8fe21c54c3de
Transformation:
- conflictMode: upsert
  dataSetId: 999
  destination:
    type: asset_hierarchy
  destinationOidcCredentials:
    audience: ${IDP_AUDIENCE}
    cdfProjectName: ${CDF_PROJECT}
    clientId: ${IDP_CLIENT_ID}
    clientSecret: ${IDP_CLIENT_SECRET}
    scopes: ${IDP_SCOPES}
    tokenUri: ${IDP_TOKEN_URL}
  externalId: tr_asset_valhall_workmate_asset_hierarchy
  ignoreNullFields: true
  isPublic: true
  name: asset:valhall:workmate:asset-hierarchy
  ownerIsCurrentUser: true
  query: "--\n-- Create Asset Hierarchy using Transformation\n--\n-- Input data from\
    \ RAW DB table (using example data)\n--\n-- Root node has parentExternal id =\
    \ ''\n-- Transformation is connected to asset data set\n-- All metadata expect\
    \ selected fileds are added to metadata\n--\nSELECT \n  sourceDb || ':' || tag\
    \          as externalId,\n  if(parentTag is null, \n     '', \n     sourceDb\
    \ || ':' ||parentTag) as parentExternalId,\n  tag                            \
    \ as name,\n  sourceDb                        as source,\n  description,\n  dataset_id('ds_asset_valhall')\
    \     as dataSetId,\n  to_metadata_except(\n    array(\"sourceDb\", \"parentTag\"\
    , \"description\"), *) \n                                  as metadata\nFROM \n\
    \  `src-asset-valhall-workmate`.`assets`\n"
  schedule:
    externalId: tr_asset_valhall_workmate_asset_hierarchy
    interval: 0 * * * *
    isPaused: true
  sourceOidcCredentials:
    audience: ${IDP_AUDIENCE}
    cdfProjectName: ${CDF_PROJECT}
    clientId: ${IDP_CLIENT_ID}
    clientSecret: ${IDP_CLIENT_SECRET}
    scopes: ${IDP_SCOPES}
    tokenUri: ${IDP_TOKEN_URL}
TransformationSchedule:
- externalId: tr_asset_valhall_workmate_asset_hierarchy
  interval: 0 * * * *
  isPaused: true
deleted:
  Transformation:
  - externalId: tr_asset_valhall_workmate_asset_hierarchy
