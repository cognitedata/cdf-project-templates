DataSet:
- description: Asset data for oid
  externalId: ds_asset_oid
  metadata:
    consoleSource: '{"names": ["workmate"]}'
    rawTables: '[{"databaseName": "asset_oid_workmate", "tableName": "assets"}]'
    transformations: '[{"externalId": "tr_asset_oid_workmate_asset_hierarchy", "type":
      "Transformations"}]'
  name: asset:oid
Group:
- capabilities:
  - rawAcl:
      actions:
      - READ
      - WRITE
      scope:
        tableScope:
          dbsToTables:
            asset_oid_workmate:
              tables: []
  - extractionConfigsAcl:
      actions:
      - READ
      scope:
        extractionPipelineScope:
          ids:
          - 1
  metadata:
    module_version: '1'
    origin: cdf-project-templates
  name: gp_asset_oid_extractor
  sourceId: <update me>
- capabilities:
  - transformationsAcl:
      actions:
      - READ
      - WRITE
      scope:
        all: {}
  - sessionsAcl:
      actions:
      - LIST
      - CREATE
      - DELETE
      scope:
        all: {}
  metadata:
    module_version: '1'
    origin: cdf-project-templates
  name: gp_asset_oid_processing
  sourceId: <update me>
- capabilities:
  - rawAcl:
      actions:
      - READ
      - WRITE
      scope:
        tableScope:
          dbsToTables:
            asset_oid_workmate:
              tables: []
  - assetsAcl:
      actions:
      - READ
      - WRITE
      scope:
        datasetScope:
          ids:
          - 42
  metadata:
    module_version: '1'
    origin: cdf-project-templates
  name: gp_asset_oid_processing
  sourceId: <update me>
- capabilities:
  - assetsAcl:
      actions:
      - READ
      scope:
        datasetScope:
          ids:
          - 42
  metadata:
    module_version: '1'
    origin: cdf-project-templates
  name: gp_asset_oid_read
  sourceId: <update me>
Transformation:
- conflictMode: upsert
  destination:
    type: asset_hierarchy
  destinationOidcCredentials:
    audience: ${IDP_AUDIENCE}
    cdfProjectName: ${CDF_PROJECT}
    clientId: ${IDP_CLIENT_ID}
    clientSecret: ${IDP_CLIENT_SECRET}
    scopes: ${IDP_SCOPES}
    tokenUri: ${IDP_TOKEN_URL}
  externalId: tr_asset_oid_workmate_asset_hierarchy
  ignoreNullFields: true
  isPublic: true
  name: asset:oid:workmate:asset_hierarchy
  ownerIsCurrentUser: true
  query: "--\n-- Create Asset Hierarchy using Transformation\n--\n-- Input data from\
    \ RAW DB table (using example data)\n--\n-- Root node has parentExternal id =\
    \ ''\n-- Transformation is connected to asset data set\n-- All metadata expect\
    \ selected fileds are added to metadata\n--\nSELECT \n  sourceDb || ':' || tag\
    \          as externalId,\n  if(parentTag is null, \n     '', \n     sourceDb\
    \ || ':' ||parentTag) as parentExternalId,\n  tag                            \
    \ as name,\n  sourceDb                        as source,\n  description,\n  dataset_id('ds_asset_oid')\
    \     as dataSetId,\n  to_metadata_except(\n    array(\"sourceDb\", \"parentTag\"\
    , \"description\"), *) \n                                  as metadata\nFROM \n\
    \  `asset_oid_workmate`.`assets`\n"
  schedule:
    externalId: tr_asset_oid_workmate_asset_hierarchy
    interval: 0 * * * *
    isPaused: true
  sourceOidcCredentials:
    audience: ${IDP_AUDIENCE}
    cdfProjectName: ${CDF_PROJECT}
    clientId: ${IDP_CLIENT_ID}
    clientSecret: ${IDP_CLIENT_SECRET}
    scopes: ${IDP_SCOPES}
    tokenUri: ${IDP_TOKEN_URL}
TransformationSchedule:
- externalId: tr_asset_oid_workmate_asset_hierarchy
  interval: 0 * * * *
  isPaused: true
deleted:
  Transformation:
  - externalId: tr_asset_oid_workmate_asset_hierarchy
